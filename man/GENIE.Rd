% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main_v2.R
\name{GENIE}
\alias{GENIE}
\title{The use of the psychometric reduction component of AIGENIE on your pre-existing item pool}
\usage{
GENIE(
  items,
  embedding.matrix = NULL,
  openai.API = NULL,
  hf.token = NULL,
  groq.API = NULL,
  jina.API = NULL,
  model = "gpt4o",
  temperature = 1,
  top.p = 1,
  embedding.model = "text-embedding-3-small",
  EGA.model = NULL,
  EGA.algorithm = NULL,
  EGA.uni.method = NULL,
  embeddings.only = FALSE,
  run.overall = FALSE,
  all.together = FALSE,
  plot = TRUE,
  silently = FALSE
)
}
\arguments{
\item{items}{Data frame with columns: statement, attribute, type, ID.
All columns must be character type except ID (numeric or character allowed).
\itemize{
\item \code{statement}: The actual item text
\item \code{attribute}: The construct/attribute the item measures
\item \code{type}: The item type/category
\item \code{ID}: Unique identifier for each item
}}

\item{embedding.matrix}{Optional numeric matrix or data frame where:
\itemize{
\item Rows represent embedding dimensions
\item Columns represent items (must match items$ID exactly)
\item If \code{NULL}, embeddings will be generated using \code{embedding.model}
}}

\item{openai.API}{OpenAI API key (required if using OpenAI embedding models)}

\item{hf.token}{HuggingFace token (optional, improves rate limits for HF models)}

\item{groq.API}{Groq API key (currently unused in GENIE)}

\item{jina.API}{Jina AI API key for using Jina embedding models (e.g., "jina-embeddings-v3").
Free tier available at \url{https://jina.ai/}.}

\item{model}{Language model identifier (currently unused in GENIE)}

\item{temperature}{LLM temperature (currently unused in GENIE)}

\item{top.p}{LLM top-p parameter (currently unused in GENIE)}

\item{embedding.model}{Embedding model to use if embedding.matrix not provided:
\itemize{
\item OpenAI: "text-embedding-3-small", "text-embedding-3-large", "text-embedding-ada-002"
\item Jina AI: "jina-embeddings-v3", "jina-embeddings-v4", "jina-embeddings-v2-base-en" (requires jina.API)
\item HuggingFace: "BAAI/bge-base-en-v1.5", "BAAI/bge-small-en-v1.5", "sentence-transformers/all-MiniLM-L6-v2"
}}

\item{EGA.model}{EGA network estimation model ("glasso", "TMFG", or NULL for auto-selection)}

\item{EGA.algorithm}{EGA community detection algorithm ("walktrap", "leiden", "louvain")}

\item{EGA.uni.method}{Unidimensionality assessment method ("louvain", "expand", "LE")}

\item{embeddings.only}{If \code{TRUE}, return embeddings and stop (skip network analysis)}

\item{run.overall}{A logical value (optional, default: FALSE). Controls whether a \emph{fit} analysis
on the complete item pool is run \emph{post-reduction.}
By default, only type-level reduction analyses are run (i.e., items of like-type go through
the pipeline independent of the other items in the pool). When this flag is \code{TRUE}, an additional
analysis is run on the overall sample, but no further reductions at the overall level are made.
If only one item type is present, this argument will be ignored.}

\item{all.together}{A logical value (optional, default: FALSE). Controls whether the \emph{reduction} analysis
on the complete item pool is run.
By default, only type-level reduction analyses are run (i.e., items of like-type go through
the pipeline independent of the other items in the pool). When this flag is \code{TRUE}, reductions are made
at the overall level (i.e., all items go through the reduction pipeline together, agnostic of item type).
If only one item type is present, this argument will be ignored.}

\item{plot}{If \code{TRUE}, display network comparison plots}

\item{silently}{If \code{TRUE}, suppress progress messages}
}
\value{
The structure of the return value depends on the function flags.

\strong{Defaults:} \code{items.only = FALSE}, \code{embeddings.only = FALSE},
\code{run.overall = FALSE}, \code{all.together = FALSE}.

\strong{When \code{items.only = TRUE}:}
Returns a \code{data.frame} of generated items with columns:
\code{ID}, \code{statement}, \code{type}, and \code{attribute}.

\strong{When \code{embeddings.only = TRUE}:}
Returns a named \code{list} with two elements:
\itemize{
\item \code{embeddings} — an embedding matrix/list (columns or rownames correspond to item IDs).
\item \code{items} — the items \code{data.frame} described above.
}

\strong{Default behaviour} (\code{items.only = FALSE}, \code{embeddings.only = FALSE},
\code{run.overall = FALSE}, \code{all.together = FALSE}):
Returns a named \code{list} with two top-level elements:
\describe{
\item{\code{item_type_level}}{A named list where each name is an item type and each element is a per-type named list containing:
\describe{
\item{\code{final_NMI}}{Numeric: final normalized mutual information after reduction.}
\item{\code{initial_NMI}}{Numeric: initial NMI of the pre-reduced item pool.}
\item{\code{embeddings}}{List or matrix of embeddings for this item type (see 'Notes on \code{embeddings}' below).}
\item{\code{UVA}}{List from Unique Variable Analysis (contains at least \code{n_removed}, \code{n_sweeps}, \code{redundant_pairs} data.frame).}
\item{\code{bootEGA}}{List with bootEGA results (e.g. \code{initial_boot}, \code{final_boot}, \code{n_removed}, \code{items_removed}, \code{initial_boot_with_redundancies}).}
\item{\code{EGA.model_selected}}{Character: chosen EGA model (e.g. \code{"TMFG"} or \code{"Glasso"}).}
\item{\code{final_items}}{\code{data.frame}: final items after reduction (columns include \code{ID}, \code{statement}, \code{attribute}, \code{type}, \code{EGA_com}).}
\item{\code{final_EGA}}{EGA object (from EGAnet) after reduction.}
\item{\code{initial_EGA}}{Initial EGA object computed on the pre-reduced item set.}
\item{\code{start_N}}{Integer: initial number of items in this type.}
\item{\code{final_N}}{Integer: final number of items in this type.}
\item{\code{network_plot}}{\code{ggplot} / \code{patchwork} object comparing networks before vs after reduction.}
\item{\code{stability_plot}}{\code{ggplot} / \code{patchwork} object showing item stability before vs after reduction.}
}
}

\item{\code{overall}}{Named list with aggregated results across all item types. Under the default this contains:
\describe{
\item{\code{final_items}}{\code{data.frame} of final items across all types (columns as above).}
\item{\code{embeddings}}{Embeddings for the full reduced item set (see 'Notes on \code{embeddings}' below). Note: \code{overall$embeddings} does \strong{not} include \code{selected}.}
}
}
}

\strong{When \code{run.overall = TRUE}} (\code{items.only = FALSE}, \code{embeddings.only = FALSE}):
\describe{
\item{\code{item_type_level}}{Same per-type structure as the default (see above).}
\item{\code{overall}}{A named list with aggregated results (not limited to \code{final_items} and \code{embeddings}) containing:
\code{final_NMI}, \code{initial_NMI}, \code{embeddings}, \code{EGA.model_selected}, \code{final_items}, \code{final_EGA}, \code{initial_EGA}, \code{start_N}, \code{final_N}, and \code{network_plot}.}
}

\strong{When \code{all.together = TRUE}} (regardless of \code{run.overall}):
Results are \strong{not} split into \code{item_type_level} and \code{overall}. Instead the function returns a single named list containing:
\code{final_NMI}, \code{initial_NMI}, \code{embeddings}, \code{UVA}, \code{bootEGA}, \code{EGA.model_selected}, \code{final_items}, \code{final_EGA}, \code{initial_EGA}, \code{start_N}, \code{final_N}, \code{network_plot}, and \code{stability_plot}.
}
\description{
GENIE applies the psychometric reduction steps present in \code{AIGENIE} on user-supplied
items. Users provide their own items and optionally their own
embeddings, then \code{GENIE} performs redundancy reduction and
structural validation to assess item quality and dimensionality.
}
\examples{
 \dontrun{
############################################################
#### Using GENIE with OpenAI's Embeddings (Recommended) ####
############################################################

# Add an OpenAI API Key
key <- "INSERT YOUR KEY HERE"


# Specify item statements that you already have written
statements <- c(
  "I find myself naturally initiating conversations with strangers at social gatherings.",
  "I enjoy creating a welcoming atmosphere for people I meet for the first time.",
  "I generally maintain a hopeful outlook, even when faced with challenges.",
  "I frequently find myself in a good mood, spreading cheer to those around me.",
  "I often have the drive to engage in exciting activities, even after a long day.",
  "I tend to tackle projects with enthusiasm and high energy from start to finish.",
  "I actively seek to include others in group activities, making them feel part of the team.",
  "I frequently reach out to new acquaintances to foster connections and friendships.",
  "I habitually focus on the silver lining in difficult situations, maintaining an optimistic perspective.",
  "I often express gratitude for the positive aspects of my life, which enhances my overall mood.",
  "I find joy in taking on new challenges that require a burst of energy and enthusiasm.",
  "I thrive in dynamic environments that keep me on my toes and invigorate my spirit.",
  "I take pleasure in introducing people to one another, acting as a social connector.",
  "I enjoy making others comfortable by engaging them in light-hearted conversation.",
  "I often set a positive tone in group settings with my upbeat demeanor.",
 "I approach each day with a sense of excitement and a positive mindset.",
 "I am drawn to fast-paced environments where I can express my high energy levels.",
 "I feel invigorated when working on multiple projects that demand my full attention.",
 "I take delight in meeting new people and quickly making them feel at ease.",
 "I find it rewarding to help shy or reserved individuals become involved in group discussions.",
 "I have a natural tendency to uplift others with my positive remarks and outlook.",
 "I find happiness in highlighting the successes of others, contributing to a cheerful environment.",
 "I eagerly immerse myself in activities that demand stamina and sustained energy.",
 "I often channel my vitality into hobbies and sports that require physical exertion.",
 "I feel rejuvenated when I bring people together to collaborate and share ideas.",
 "I often extend a genuine greeting to others, creating an inviting atmosphere.",
 "I regularly see challenges as opportunities for growth and learning.",
 "I commonly radiate positivity, influencing the mood of those around me.",
 "I approach mornings with anticipation and vigor, ready to embrace the day.",
 "I consistently infuse enthusiasm into group activities, boosting collective energy levels.",
 "I make an effort to connect with people by remembering details about their lives.",
 "I genuinely enjoy learning about people's diverse experiences and viewpoints.",
 "I have a habit of encouraging others to see the bright side of their situations.",
 "I believe in celebrating small victories, finding joy in daily accomplishments.",
 "I often find myself eager to start the day with ambitious plans and goals.",
 "I am known for sustaining high levels of energy during extended work sessions or projects.",
 "I make an effort to engage those around me in meaningful and enjoyable conversations.",
 "I often seek opportunities to bring people together, fostering a sense of community.",
 "I naturally inspire others with my optimistic outlook, even in uncertain times.",
 "I frequently look for the positive aspects in challenging situations and share them with others.",
 "I approach new experiences with an eagerness and fervor that motivates those around me.",
 "I thrive on maintaining high energy levels throughout demanding and fast-paced days.",
 "I take pleasure in initiating warm interactions in group settings to make everyone comfortable.",
 "I enjoy hosting gatherings that connect friends and encourage social bonding.",
 "I am skilled at turning setbacks into learning experiences to maintain a positive outlook.",
 "I always try to highlight the benefits in situations, enhancing a cheerful atmosphere.",
 "I find excitement in starting the day with a list of activities to energize my routine.",
 "I relish the challenge of keeping up with dynamic schedules that require sustained energy.",
 "I often find joy in making newcomers feel welcome and appreciated in group settings.",
 "I genuinely enjoy striking up conversations to learn more about the people I encounter.",
 "I have a knack for seeing potential in situations that others might overlook.",
 "I consistently try to uplift the mood in my surroundings with hopeful and encouraging words.",
 "I frequently harness my energy to inspire and motivate those around me in team environments.",
 "I often feel invigorated by challenges that require sustained focus and dynamic thinking.",
 "I often create environments where people feel encouraged to share their thoughts freely.",
 "I find it fulfilling to engage deeply with people, building lasting connections.",
 "I see potential in every day, believing it holds opportunities for something good.",
 "I actively focus on the pleasures of life, which naturally enhances my mood.",
 "I am invigorated by opportunities to engage in lively and spirited events.",
 "I tend to maintain momentum throughout the day, sustaining my energy levels.",
 "I frequently experience sudden shifts in my emotions even when there is no apparent reason.",
 "People often find it difficult to predict my emotional reactions to different situations.",
 "I often doubt my abilities and worry about whether I am meeting expectations.",
 "I frequently question my self-worth and tend to seek reassurance from others.",
 "I become annoyed easily over small inconveniences or delays.",
 "I often find myself feeling agitated or frustrated in situations that don't bother most people.",
 "My mood can change drastically over the course of a day, often without any clear reason.",
 "I tend to experience emotional highs and lows more intensely than those around me.",
 "I sometimes avoid taking on new challenges because I fear not being good enough.",
 "I often feel uncertain about my social standing and worry about being accepted by others.",
 "I find myself getting irritated quickly when things don't go my way.",
 "Minor annoyances often cause my patience to wear thin unusually fast.",
 "I frequently struggle to maintain a stable emotional state throughout the day.",
 "Unexpected events can cause me to experience drastic emotional swings.",
 "I often feel inadequate in comparison to others around me.",
 "I tend to second-guess my choices due to a lack of confidence in myself.",
 "I tend to become frustrated when things do not proceed as I have planned.",
 "I am prone to irritation when faced with unexpected changes to my routine.",
 "My emotional state is often unpredictable, shifting from contentment to sadness with little warning.",
 "People have commented that my emotions seem to fluctuate more than those of others.",
 "I frequently feel self-conscious about my achievements compared to those of my peers.",
 "I often worry excessively about making mistakes, even in situations where it might be inconsequential.",
 "Small disruptions in my daily routine can trigger strong feelings of annoyance.",
 "I find myself becoming irritated more quickly than others when under stress or pressure.",
 "I often find my emotional responses to be unpredictable, feeling fine one moment and unsettled the next.",
 "I experience strong emotions that can shift unexpectedly, often catching me off guard.",
 "I regularly feel uncertain about my ability to manage new responsibilities effectively.",
 "I often question my decisions, fearing they might not lead to the best outcomes.",
 "I frequently find myself reacting with impatience to situations perceived as minor interruptions.",
 "Even minor provocations can sometimes lead to an exaggerated sense of annoyance for me.",
 "My emotional state is often inconsistent, and I can feel ecstatic or despondent within short timeframes.",
 "I notice that my feelings can be quite volatile and intense, affecting how I interact with others throughout the day.",
 "I regularly doubt whether I am capable of achieving my personal or professional goals.",
 "I often seek validation from others to feel reassured about my self-worth.",
 "I am sensitive to disturbances and find my patience wearing thin quickly when things aren't orderly.",
 "I occasionally struggle to contain my annoyance over trivial issues that disrupt my sense of calm.",
 "I can go from feeling upbeat to being downcast without an obvious cause.",
 "My emotional responses can sometimes be unpredictable, shifting with little notice.",
 "I often feel the need for affirmation about my abilities from friends or colleagues.",
 "I tend to compare myself to others and feel uncertain about my achievements.",
 "I find myself easily bothered by noises or disturbances in my environment.",
 "I get easily flustered by situations that interrupt my planned activities.",
 "I find it challenging to maintain a consistent emotional state, regardless of external situations.",
 "My emotional reactions can be intense and differ significantly from moment to moment.",
 "I have a persistent fear of not measuring up to the expectations placed on me.",
 "I often feel anxious about others' perceptions of my capabilities and appearance.",
 "I am quick to express frustration at minor inconveniences in my daily routine.",
 "I find that small, unforeseen events often disrupt my sense of calm and lead to irritation.",
 "My emotional reactions can be strong and relentless, impacting my behavior throughout the day.",
 "I often find myself emotionally labile, with an inner turbulence that others rarely perceive.",
 "I frequently worry about my competence in areas where others seem confident.",
 "I have a tendency to second-guess myself and require affirmation to feel reassured about my choices.",
 "Small disruptions can ignite a lingering sense of agitation within me.",
 "I often catch myself feeling irritable even in relatively calm settings.",
 "I find myself swinging from happy to melancholic in a short span of time, often surprising even myself.",
 "Others often comment on how quickly my mood can change in response to seemingly minor events.",
 "I tend to feel apprehensive about presenting my opinions, fearing they may be judged harshly.",
 "I often require reassurance from peers to feel confident in my decisions and ideas.",
 "Interruptions during focused tasks often lead to an outpour of irritation from me.",
 "I struggle to keep my frustration in check when things do not unfold as expected."
)


# Create the item type and attribute labels
item.attributes <- c(
 rep(c("friendly", "positive", "energetic"), each = 2, times = 10),
 rep(c("moody", "insecure", "irritable"), each = 2, times = 10)
)
item.types <- c(
 rep("extraversion", 60),
 rep("neuroticism", 60)
)




# Build your data frame with the required columns: ID, statement, attribute, and type
items_df <- data.frame(
 ID = rep(as.factor(1:length(statements))),
 statement = statements,
 attribute = item.attributes,
 type = item.types
)


# Run GENIE with items you provide (embedding items via OpenAI)
example_reduction <- GENIE(items = items_df,
                          openai.API = key)

# View the results
View(example_reduction)


################################################################
###### Or, Run GENIE with a Hugging Face Embedding Model #######
################################################################

# Chose a BAAI/bge series OR thenlper/gte series model
hf.embedding.model <- "BAAI/bge-large-en-v1.5"

# Create a HF Token to access the best models. Moderate useage will still be FREE
hf.token <- "INSERT YOUR KEY HERE"

# Run GENIE using the Hugging Face Embedding model
example_reduction_HF <- GENIE(items = items_df,
                             embedding.model = hf.embedding.model,
                             hf.token = hf.token)



}
}
