% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pipeline_helpers_optimized.R
\name{sparsify_embeddings}
\alias{sparsify_embeddings}
\title{Sparsify Embedding Matrix}
\usage{
sparsify_embeddings(
  embedding_matrix,
  lower_quantile = 0.025,
  upper_quantile = 0.975,
  fallback_lower = 0.1,
  fallback_upper = 0.9
)
}
\arguments{
\item{embedding_matrix}{Numeric matrix with items as columns, dimensions as rows}

\item{lower_quantile}{Lower quantile threshold (default 0.025)}

\item{upper_quantile}{Upper quantile threshold (default 0.975)}

\item{fallback_lower}{Fallback lower quantile if first attempt fails (default 0.10)}

\item{fallback_upper}{Fallback upper quantile if first attempt fails (default 0.90)}
}
\value{
Sparsified embedding matrix with same dimensions as input
}
\description{
Applies sparsification to an embedding matrix by zeroing out values between
specified quantiles. Includes fallback strategies if initial sparsification
results in all zeros.
}
\details{
Sparsification process:
\enumerate{
\item Zero out values between lower and upper quantiles
\item If result is all zeros, try fallback quantiles
\item If still all zeros, return original matrix
}

\code{silently} is always \code{TRUE}. It is only set to \code{FALSE} for developement
and diagnostic purposes.
}
